(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{114:function(e,t,c){"use strict";c.r(t);var a=c(1),s=c.n(a),n=c(21),r=c.n(n),j=(c(64),c(6)),i=c(7),l=c(10),b=c(54),d=c.n(b).a.create({baseURL:"http://localhost:5000/api",timeout:1e4,headers:{Authorization:"JWT "+localStorage.getItem("access_token"),"Content-Type":"application/json",accept:"application/json"}});function h(e){var t=Object(a.useState)([]),c=Object(j.a)(t,2),s=c[0],n=c[1],r=Object(a.useState)(!1),i=Object(j.a)(r,2),l=i[0],b=i[1],h=Object(a.useState)(null),u=Object(j.a)(h,2),O=u[0],o=u[1];return Object(a.useEffect)((function(){d.get(e).then((function(e){n(e.data),b(!0)})).catch((function(e){o(e)}))}),[e]),{error:O,isLoaded:l,data:s}}var u=c(126),O=c(0);function o(e){return Object(O.jsx)(i.b,{to:"/user/"+e.user,children:e.user})}function x(e){return Object(O.jsx)(u.a,{children:Object(O.jsxs)(u.a.Body,{children:[Object(O.jsx)(u.a.Title,{children:Object(O.jsx)(i.b,{to:"/post/"+e.data.id,children:e.data.title+" "+e.data.id})}),Object(O.jsx)(u.a.Text,{children:e.data.text}),Object(O.jsx)(u.a.Text,{children:Object(O.jsxs)("i",{children:["Made By: ",Object(O.jsx)(o,{user:e.data.user})]})})]})})}var m=c(119),f=c(120),p=c(121),v=c(56);function g(){var e=h("/post"),t=e.data,c=e.error,a=e.isLoaded;return null!==c?Object(O.jsxs)("div",{children:["Error: ",c.message]}):a?Object(O.jsx)(f.a,{children:Object(O.jsx)(p.a,{children:Object(O.jsx)(v.a,{children:Object(O.jsx)(p.a,{className:"justify-content-md-center",children:Object(O.jsxs)(v.a,{md:"8",children:[Object(O.jsx)("h1",{children:"Posts"}),t.map((function(e){return Object(O.jsx)(p.a,{className:"justify-content-center",children:Object(O.jsx)(v.a,{children:Object(O.jsx)(x,{data:e})})})}))]})})})})}):Object(O.jsx)(m.a,{animation:"border",role:"status",children:Object(O.jsx)("span",{className:"sr-only"})})}var y=s.a.createContext(),S=c(125),C=c(57);function k(){var e=Object(l.f)(),t=Object(a.useState)(""),c=Object(j.a)(t,2),n=c[0],r=c[1],i=Object(a.useState)(""),b=Object(j.a)(i,2),h=b[0],o=b[1],x=Object(a.useState)(!1),m=Object(j.a)(x,2),g=m[0],k=m[1],L=s.a.useContext(y),N=L.authState;L.setAuthState,L.userState,L.setUserState;return Object(a.useEffect)((function(){0==N&&e.push("/")})),Object(O.jsx)(f.a,{children:Object(O.jsx)(p.a,{children:Object(O.jsx)(v.a,{children:Object(O.jsx)(p.a,{className:"justify-content-md-center",children:Object(O.jsxs)(v.a,{md:"8",children:[Object(O.jsx)("h1",{children:"Create Post"}),Object(O.jsx)(u.a,{children:Object(O.jsx)(u.a.Body,{children:Object(O.jsxs)(S.a,{onSubmit:function(t){return t.preventDefault(),void(""!=n&&""!=h&&0!=g?d.post("/post",{title:n,text:h}).then((function(t){201==t.status?alert("success"):alert("fail"),e.push("/")})).catch((function(e){alert(e)})):alert("please do not leave any fields blank"))},children:[Object(O.jsxs)(S.a.Group,{children:[Object(O.jsx)(S.a.Label,{children:"Title"}),Object(O.jsx)(S.a.Control,{value:n,onChange:function(e){return r(e.target.value)}})]}),Object(O.jsx)("br",{}),Object(O.jsxs)(S.a.Group,{children:[Object(O.jsx)(S.a.Label,{children:"Description"}),Object(O.jsx)(S.a.Control,{as:"textarea",rows:"9",value:h,onChange:function(e){return o(e.target.value)}})]}),Object(O.jsx)("br",{}),Object(O.jsx)(S.a.Check,{type:"checkbox",value:g,checked:g,onChange:function(e){return k(!g)},label:"Confirm"}),Object(O.jsx)("br",{}),Object(O.jsx)(C.a,{type:"submit",children:"Submit"})]})})})]})})})})})}var L=c(127);function N(e){var t=Object(l.g)().postId,c=h("/post/"+String(t)),a=c.data,n=c.error,r=c.isLoaded,j=s.a.useContext(y),b=j.authState,d=(j.setAuthState,j.userState);return null!==n?Object(O.jsxs)("div",{children:["Error: ",n.message]}):r?Object(O.jsx)(f.a,{children:Object(O.jsx)(p.a,{children:Object(O.jsx)(v.a,{children:Object(O.jsx)(p.a,{className:"justify-content-md-center",children:Object(O.jsxs)(v.a,{md:"8",children:[Object(O.jsxs)("h1",{children:["Viewing Post ",a.id]}),Object(O.jsx)(u.a,{children:Object(O.jsx)(u.a.Body,{children:Object(O.jsxs)(L.a,{variant:"flush",children:[Object(O.jsx)(L.a.Item,{children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(v.a,{sm:"2",children:Object(O.jsx)("b",{children:"Title:"})}),Object(O.jsx)(v.a,{children:a.title})]})}),Object(O.jsx)(L.a.Item,{children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(v.a,{sm:"2",children:Object(O.jsx)("b",{children:"Description:"})}),Object(O.jsx)(v.a,{children:a.text})]})}),Object(O.jsx)(L.a.Item,{children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(v.a,{sm:"2",children:Object(O.jsx)("b",{children:"Created at:"})}),Object(O.jsx)(v.a,{children:a.created_date})]})}),Object(O.jsx)(L.a.Item,{children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(v.a,{sm:"2",children:Object(O.jsx)("b",{children:"Author:"})}),Object(O.jsx)(v.a,{children:Object(O.jsx)(o,{user:a.user})})]})})]})})}),Object(O.jsx)("br",{}),b&&null!=d&&(d.username==a.user||d.privilege>1)?Object(O.jsx)(p.a,{children:Object(O.jsx)(v.a,{sm:"2",children:Object(O.jsx)(i.b,{to:"/post/"+String(t)+"/edit",children:Object(O.jsx)(C.a,{children:"Edit"})})})}):""]})})})})}):Object(O.jsx)(m.a,{animation:"border",role:"status",children:Object(O.jsx)("span",{className:"sr-only"})})}function w(e){var t=Object(l.g)().postId,c=Object(l.f)(),n=Object(a.useState)(""),r=Object(j.a)(n,2),i=r[0],b=r[1],o=Object(a.useState)(""),x=Object(j.a)(o,2),g=x[0],k=x[1],L=Object(a.useState)(!1),N=Object(j.a)(L,2),w=N[0],I=N[1],E=s.a.useContext(y),B=E.authState,A=(E.setAuthState,E.userState),P=h("/post/"+String(t)),G=P.data,U=(P.error,P.isLoaded),R=Object(a.useRef)(1);Object(a.useEffect)((function(){return R.current=1,B&&null!=A||c.push("/"),function(){R.current=0}}));var D=function(){U&&R&&(G.user!=A.username&&A.privilege<=1&&c.push("/"),b(G.title),k(G.text))};Object(a.useEffect)((function(){D()}),[U]);return U?Object(O.jsx)(f.a,{children:Object(O.jsx)(p.a,{children:Object(O.jsx)(v.a,{children:Object(O.jsx)(p.a,{className:"justify-content-md-center",children:Object(O.jsxs)(v.a,{md:"8",children:[Object(O.jsxs)("h1",{children:["Edit Post ",G.id]}),Object(O.jsx)(u.a,{children:Object(O.jsxs)(u.a.Body,{children:[Object(O.jsxs)(S.a,{onSubmit:function(e){return e.preventDefault(),void(""!=i&&""!=g&&0!=w?d.put("/post/"+String(G.id),{title:i,text:g}).then((function(e){201==e.status?alert("success"):alert("fail"),c.push("/post/"+G.id)})).catch((function(e){alert(e)})):alert("please do not leave any fields blank"))},children:[Object(O.jsxs)(S.a.Group,{children:[Object(O.jsx)(S.a.Label,{children:"Title"}),Object(O.jsx)(S.a.Control,{value:i,onChange:function(e){return b(e.target.value)}})]}),Object(O.jsx)("br",{}),Object(O.jsxs)(S.a.Group,{children:[Object(O.jsx)(S.a.Label,{children:"Description"}),Object(O.jsx)(S.a.Control,{as:"textarea",rows:"9",value:g,onChange:function(e){return k(e.target.value)}})]}),Object(O.jsx)("br",{}),Object(O.jsx)(S.a.Check,{type:"checkbox",value:w,checked:w,onChange:function(e){return I(!w)},label:"Confirm"}),Object(O.jsx)("br",{}),Object(O.jsx)(C.a,{type:"submit",children:"Submit"})]}),Object(O.jsx)(C.a,{variant:"warning",onClick:D,children:"Reset"}),Object(O.jsx)(C.a,{variant:"danger",onClick:function(){d.delete("/post/"+String(G.id)).then((function(e){200==e.status?alert("success"):alert("fail"),c.push("/")})).catch((function(e){alert(e)}))},children:"Delete"})]})})]})})})})}):Object(O.jsx)(m.a,{animation:"border",role:"status",children:Object(O.jsx)("span",{className:"sr-only"})})}function I(){var e=Object(l.f)(),t=Object(a.useState)(""),c=Object(j.a)(t,2),n=c[0],r=c[1],b=Object(a.useState)(""),h=Object(j.a)(b,2),o=h[0],x=h[1],m=s.a.useContext(y),g=(m.authState,m.setAuthState);return Object(O.jsx)(f.a,{children:Object(O.jsx)(p.a,{children:Object(O.jsx)(v.a,{children:Object(O.jsx)(p.a,{className:"justify-content-md-center",children:Object(O.jsxs)(v.a,{md:"8",children:[Object(O.jsx)("h1",{children:"Login"}),Object(O.jsx)(u.a,{children:Object(O.jsx)(u.a.Body,{children:Object(O.jsxs)(S.a,{onSubmit:function(t){return t.preventDefault(),void(""!=n&&""!=o?d.post("/auth/token",{email:n,password:o}).then((function(t){202==t.status?(d.defaults.headers.Authorization="JWT "+t.data,localStorage.setItem("access_token",t.data),g(!0),e.push("/")):alert(t)})).catch((function(t){401==t.response.status?e.push("/verify/instructions"):alert(t)})):alert("please do not leave any fields blank"))},children:[Object(O.jsxs)(S.a.Group,{children:[Object(O.jsx)(S.a.Label,{children:"Email"}),Object(O.jsx)(S.a.Control,{type:"email",value:n,onChange:function(e){return r(e.target.value)}})]}),Object(O.jsx)("br",{}),Object(O.jsxs)(S.a.Group,{children:[Object(O.jsx)(S.a.Label,{children:"Password"}),Object(O.jsx)(S.a.Control,{type:"password",value:o,onChange:function(e){return x(e.target.value)}})]}),Object(O.jsx)("br",{}),Object(O.jsx)(i.b,{to:"/forgotpassword",children:"Forgot Password"}),Object(O.jsx)("br",{}),Object(O.jsx)(C.a,{type:"submit",children:"Submit"})]})})})]})})})})})}function E(e){var t=Object(l.f)(),c=Object(a.useState)(""),s=Object(j.a)(c,2),n=s[0],r=s[1],i=Object(a.useState)(""),b=Object(j.a)(i,2),h=b[0],o=b[1],x=Object(a.useState)(""),g=Object(j.a)(x,2),y=g[0],k=g[1],L=Object(a.useState)(""),N=Object(j.a)(L,2),w=N[0],I=N[1],E=Object(a.useState)(!1),B=Object(j.a)(E,2),A=B[0],P=B[1];return Object(O.jsx)(f.a,{children:Object(O.jsx)(p.a,{children:Object(O.jsx)(v.a,{children:Object(O.jsx)(p.a,{className:"justify-content-md-center",children:Object(O.jsxs)(v.a,{md:"8",children:[Object(O.jsx)("h1",{children:"Register"}),Object(O.jsx)(u.a,{children:Object(O.jsx)(u.a.Body,{children:Object(O.jsxs)(S.a,{onSubmit:function(e){return e.preventDefault(),void(""!=n&&""!=y&&y==w&&""!=h?(d.post("/auth/user",{username:h,email:n,password:y}).then((function(e){201==e.status?(alert("success"),t.push("/verify/instructions")):alert(e),P(!1)})).catch((function(e){alert(e),P(!1)})),P(!0)):alert("please do not leave any fields blank"))},children:[Object(O.jsxs)(S.a.Group,{children:[Object(O.jsx)(S.a.Label,{children:"Email"}),Object(O.jsx)(S.a.Control,{type:"email",value:n,onChange:function(e){return r(e.target.value)}})]}),Object(O.jsx)("br",{}),Object(O.jsxs)(S.a.Group,{children:[Object(O.jsx)(S.a.Label,{children:"Username"}),Object(O.jsx)(S.a.Control,{value:h,onChange:function(e){return o(e.target.value)}})]}),Object(O.jsx)("br",{}),Object(O.jsxs)(S.a.Group,{children:[Object(O.jsx)(S.a.Label,{children:"Password"}),Object(O.jsx)(S.a.Control,{type:"password",value:y,onChange:function(e){return k(e.target.value)}})]}),Object(O.jsx)("br",{}),Object(O.jsxs)(S.a.Group,{children:[Object(O.jsx)(S.a.Label,{children:"Confirm Password"}),Object(O.jsx)(S.a.Control,{type:"password",value:w,onChange:function(e){return I(e.target.value)}})]}),Object(O.jsx)("br",{}),A?Object(O.jsx)(m.a,{animation:"border",role:"status"}):Object(O.jsx)(C.a,{type:"submit",children:"Submit"})]})})})]})})})})})}function B(e){var t=e.user,c=h("/post/user/"+t),a=c.data,s=c.error,n=c.isLoaded;return null!==s?Object(O.jsxs)("div",{children:["Error: ",s.message]}):n?Object(O.jsxs)(u.a,{children:[Object(O.jsxs)(u.a.Header,{children:["Posts by ",t]}),Object(O.jsx)(u.a.Body,{children:0==a.length?Object(O.jsx)("h4",{children:"This user hasn't made any posts yet..."}):Object(O.jsxs)(L.a,{variant:"flush",children:[Object(O.jsx)(L.a.Item,{children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(v.a,{sm:"1",children:Object(O.jsx)("b",{children:"Id"})}),Object(O.jsx)(v.a,{sm:"7",children:Object(O.jsx)("b",{children:"Title"})}),Object(O.jsx)(v.a,{sm:"4",children:Object(O.jsx)("b",{children:"Date"})})]})}),a.map((function(e){return Object(O.jsx)(L.a.Item,{children:Object(O.jsx)(i.b,{to:"/post/"+e.id,children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(v.a,{sm:"1",children:e.id}),Object(O.jsx)(v.a,{sm:"7",children:e.title}),Object(O.jsx)(v.a,{sm:"4",children:e.created_date})]})})})}))]})})]}):Object(O.jsx)(m.a,{animation:"border",role:"status",children:Object(O.jsx)("span",{className:"sr-only"})})}function A(e){var t=Object(l.g)().userName,c=h("/user/"+String(t)),a=c.data,n=c.error,r=c.isLoaded,j=s.a.useContext(y),b=j.authState,d=(j.setAuthState,j.userState);return null!==n?Object(O.jsxs)("div",{children:["Error: ",n.message]}):r?Object(O.jsx)(f.a,{children:Object(O.jsx)(p.a,{className:"justify-content-md-center",children:Object(O.jsxs)(v.a,{md:"8",children:[Object(O.jsxs)(p.a,{children:[Object(O.jsx)(v.a,{md:"auto",children:Object(O.jsx)("img",{src:null==a.avatar?"/default_avatar.jpg":new URL(a.avatar),style:{width:"120px",height:"120px",padding:"0px"}})}),Object(O.jsxs)(v.a,{md:"auto",children:[Object(O.jsx)("h1",{children:a.username}),Object(O.jsx)("p",{children:a.name})]})]}),Object(O.jsxs)(u.a,{children:[Object(O.jsx)(u.a.Header,{children:Object(O.jsxs)(p.a,{className:"justify-content-between",children:[Object(O.jsx)(v.a,{xs:"auto",children:"Information"}),Object(O.jsx)(v.a,{xs:"auto",children:b&&null!=d&&(a.username==d.username||d.privilege>1)?Object(O.jsx)(i.b,{to:"/user/"+t+"/edit",children:Object(O.jsx)(C.a,{children:"Edit"})}):""})]})}),Object(O.jsx)(u.a.Body,{children:Object(O.jsxs)(L.a,{variant:"flush",children:[Object(O.jsx)(L.a.Item,{children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(v.a,{sm:"2",children:Object(O.jsx)("b",{children:"Username:"})}),Object(O.jsx)(v.a,{children:a.username})]})}),Object(O.jsx)(L.a.Item,{children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(v.a,{sm:"2",children:Object(O.jsx)("b",{children:"Name:"})}),Object(O.jsx)(v.a,{children:a.name})]})}),Object(O.jsx)(L.a.Item,{children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(v.a,{sm:"2",children:Object(O.jsx)("b",{children:"Bio:"})}),Object(O.jsx)(v.a,{children:a.bio})]})}),Object(O.jsx)(L.a.Item,{children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(v.a,{sm:"2",children:Object(O.jsx)("b",{children:"Birthday:"})}),Object(O.jsx)(v.a,{children:a.birthday})]})}),Object(O.jsx)(L.a.Item,{children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(v.a,{sm:"2",children:Object(O.jsx)("b",{children:"Gender:"})}),Object(O.jsx)(v.a,{children:a.gender})]})})]})})]}),Object(O.jsx)("br",{}),a.private?Object(O.jsx)("h1",{children:"This account's posts are private"}):Object(O.jsx)(B,{user:a.username})]})})}):Object(O.jsx)(m.a,{animation:"border",role:"status",children:Object(O.jsx)("span",{className:"sr-only"})})}function P(e){var t=Object(l.g)().userName,c=Object(l.f)(),n=Object(a.useState)(""),r=Object(j.a)(n,2),i=(r[0],r[1]),b=Object(a.useState)(""),o=Object(j.a)(b,2),x=o[0],f=o[1],p=Object(a.useState)(""),v=Object(j.a)(p,2),g=v[0],k=v[1],L=Object(a.useState)(""),N=Object(j.a)(L,2),w=N[0],I=N[1],E=Object(a.useState)(""),B=Object(j.a)(E,2),A=B[0],P=B[1],G=Object(a.useState)(!1),U=Object(j.a)(G,2),R=U[0],D=U[1],T=Object(a.useState)(!1),_=Object(j.a)(T,2),H=_[0],F=_[1],J=s.a.useContext(y),q=(J.authState,J.setAuthState),V=(J.userState,J.setUserState),W=h("/user/"+String(t)),z=W.data,M=(W.error,W.isLoaded),Y=Object(a.useRef)(1);Object(a.useEffect)((function(){return Y.current=1,function(){Y.current=0}}));var K=function(){M&&Y&&(i(z.avatar),f(z.bio),k(z.birthday),I(z.gender),P(z.name),D(z.private))};Object(a.useEffect)((function(){K()}),[M]);return M?Object(O.jsxs)(u.a,{children:[Object(O.jsx)(u.a.Header,{children:Object(O.jsx)("h2",{children:"Edit Profile"})}),Object(O.jsxs)(u.a.Body,{children:[Object(O.jsxs)(S.a,{onSubmit:function(e){return e.preventDefault(),void(""!=x&&""!=A&&0!=H?d.put("/user/"+t,{username:t,name:A,bio:x,gender:w,private:R,birthday:String(g)}).then((function(e){200==e.status?alert("success"):alert("fail"),c.push("/user/"+z.username)})).catch((function(e){alert(e)})):alert("please do not leave any fields blank"))},children:[Object(O.jsxs)(S.a.Group,{children:[Object(O.jsx)(S.a.Label,{children:"Name"}),Object(O.jsx)(S.a.Control,{value:A,onChange:function(e){return P(e.target.value)}})]}),Object(O.jsx)("br",{}),Object(O.jsxs)(S.a.Group,{children:[Object(O.jsx)(S.a.Label,{children:"Bio"}),Object(O.jsx)(S.a.Control,{as:"textarea",rows:"9",value:x,onChange:function(e){return f(e.target.value)}})]}),Object(O.jsx)("br",{}),Object(O.jsxs)(S.a.Group,{children:[Object(O.jsx)(S.a.Label,{children:"Gender"}),Object(O.jsx)(S.a.Control,{value:w,onChange:function(e){return I(e.target.value)}})]}),Object(O.jsx)("br",{}),Object(O.jsx)(S.a.Group,{children:Object(O.jsx)(S.a.Check,{type:"checkbox",value:R,checked:R,onChange:function(e){return D(!R)},label:"Private"})}),Object(O.jsx)("br",{}),Object(O.jsxs)(S.a.Group,{children:[Object(O.jsx)(S.a.Label,{children:"Birthday"}),Object(O.jsx)(S.a.Control,{type:"date",placeholder:"Date of Birth",value:g,onChange:function(e){return k(e.target.value)}})]}),Object(O.jsx)("br",{}),Object(O.jsx)(S.a.Check,{type:"checkbox",value:H,checked:H,onChange:function(e){return F(!H)},label:"Confirm"}),Object(O.jsx)("br",{}),Object(O.jsx)(C.a,{type:"submit",children:"Submit"})]}),Object(O.jsx)(C.a,{variant:"warning",onClick:K,children:"Clear Changes"}),Object(O.jsx)("br",{}),Object(O.jsx)(C.a,{variant:"danger",onClick:function(){d.delete("/user/"+t).then((function(e){200==e.status?(localStorage.removeItem("access_token"),q(!1),V(null),alert("account deleted"),c.push("/")):alert("fail")})).catch((function(e){alert(e)}))},children:"Delete Account"})]})]}):Object(O.jsx)(m.a,{animation:"border",role:"status",children:Object(O.jsx)("span",{className:"sr-only"})})}var G=c(122);function U(e){var t=Object(l.g)().userName,c=Object(l.f)(),s=Object(a.useState)(""),n=Object(j.a)(s,2),r=n[0],i=n[1],b=Object(a.useState)(""),o=Object(j.a)(b,2),x=o[0],f=o[1],p=h("/user/"+String(t)),v=p.data,g=(p.error,p.isLoaded),y=Object(a.useRef)(1);Object(a.useEffect)((function(){return y.current=1,function(){y.current=0}}));Object(a.useEffect)((function(){g&&y&&i(v.avatar)}),[g]);return g?Object(O.jsxs)(u.a,{children:[Object(O.jsx)(u.a.Header,{children:Object(O.jsx)("h2",{children:"Edit Avatar"})}),Object(O.jsx)(u.a.Body,{children:Object(O.jsxs)(S.a,{onSubmit:function(e){return e.preventDefault(),void(""!=r?function(){var e=new FormData;e.append("file",r),e.append("filename",r.name),d.post("/upload/avatar/"+t,e).then((function(e){200==e.status?alert("success"):alert("fail"),c.push("/user/"+v.username)})).catch((function(e){alert(e)}))}():alert("please do not leave any fields blank"))},children:[Object(O.jsx)(S.a,{children:Object(O.jsx)(S.a.File,{id:"custom-file",label:"Upload a new avatar",custom:!0,onChange:function(e){i(e.target.files[0]),f(URL.createObjectURL(e.target.files[0]))}})}),Object(O.jsx)(G.a,{src:x,style:{width:"120px",height:"120px",padding:"0px"}}),Object(O.jsx)("br",{}),Object(O.jsx)(C.a,{type:"submit",children:"Submit"})]})})]}):Object(O.jsx)(m.a,{animation:"border",role:"status",children:Object(O.jsx)("span",{className:"sr-only"})})}function R(e){var t=Object(l.g)().userName,c=(Object(l.f)(),h("/auth/user/"+t)),a=c.data;c.error;return c.isLoaded?Object(O.jsxs)(u.a,{children:[Object(O.jsx)(u.a.Header,{children:Object(O.jsx)("h2",{children:"Edit Credentials"})}),Object(O.jsxs)(u.a.Body,{children:[Object(O.jsxs)(L.a,{variant:"flush",children:[Object(O.jsx)(L.a.Item,{children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(v.a,{sm:"3",children:Object(O.jsx)("b",{children:"Username:"})}),Object(O.jsx)(v.a,{children:a.username})]})}),Object(O.jsx)(L.a.Item,{children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(v.a,{sm:"3",children:Object(O.jsx)("b",{children:"Email:"})}),Object(O.jsx)(v.a,{children:a.email})]})}),Object(O.jsx)(L.a.Item,{children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(v.a,{sm:"3",children:Object(O.jsx)("b",{children:"Privilege:"})}),Object(O.jsx)(v.a,{children:+a.privilege})]})})]}),Object(O.jsx)(i.b,{to:"/forgotpassword",children:"Reset Password"})]})]}):Object(O.jsx)(m.a,{animation:"border",role:"status",children:Object(O.jsx)("span",{className:"sr-only"})})}function D(e){var t=Object(l.g)().userName,c=Object(l.f)(),n=Object(a.useState)(!1),r=Object(j.a)(n,2),i=r[0],b=r[1],o=s.a.useContext(y),x=(o.authState,o.setAuthState,o.userState,o.setUserState,h("/auth/user/"+t)),f=x.data,p=(x.error,x.isLoaded),v=Object(a.useRef)(1);Object(a.useEffect)((function(){return v.current=1,function(){v.current=0}}));var g=function(){p&&v&&b(f.privilege>1)};Object(a.useEffect)((function(){g()}),[p]);return p?Object(O.jsxs)(u.a,{children:[Object(O.jsx)(u.a.Header,{children:Object(O.jsx)("h2",{children:"Edit Profile"})}),Object(O.jsxs)(u.a.Body,{children:[Object(O.jsxs)(S.a,{onSubmit:function(e){return e.preventDefault(),void d.put("auth/user/privilege/"+t,{privilege:i?2:1}).then((function(e){200==e.status?alert("success"):alert("fail"),c.push("/user/"+f.username)})).catch((function(e){alert(e)}))},children:[Object(O.jsx)(S.a.Check,{type:"checkbox",value:i,checked:i,onChange:function(e){return b(!i)},label:"Administrator"}),Object(O.jsx)("br",{}),Object(O.jsx)(C.a,{type:"submit",children:"Submit"})]}),Object(O.jsx)(C.a,{variant:"warning",onClick:g,children:"Clear Changes"})]})]}):Object(O.jsx)(m.a,{animation:"border",role:"status",children:Object(O.jsx)("span",{className:"sr-only"})})}var T=c(128);function _(e){var t=Object(l.g)().userName,c=Object(l.f)(),n=s.a.useContext(y),r=n.authState,i=n.userState,b=Object(a.useState)(1),d=Object(j.a)(b,2),h=d[0],u=d[1];return Object(a.useEffect)((function(){(!r||null==i||t!=i.username&&i.privilege<=1)&&c.push("/")})),Object(O.jsx)(f.a,{children:Object(O.jsx)(p.a,{children:Object(O.jsx)(v.a,{children:Object(O.jsx)(p.a,{className:"justify-content-md-center",children:Object(O.jsx)(v.a,{md:"8",children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(v.a,{md:"2",children:Object(O.jsxs)(T.a,{defaultActiveKey:"/home",className:"flex-column",children:[Object(O.jsx)(T.a.Link,{onClick:function(){return u(1)},children:"Profile"}),Object(O.jsx)(T.a.Link,{onClick:function(){return u(2)},children:"Credentials"}),Object(O.jsx)(T.a.Link,{onClick:function(){return u(3)},children:"Avatar"}),null!=i&&i.privilege>1?Object(O.jsx)(T.a.Link,{onClick:function(){return u(4)},children:"Admin"}):""]})}),Object(O.jsx)(v.a,{children:function(e){switch(h){case 1:return Object(O.jsx)(P,{});case 2:return Object(O.jsx)(R,{});case 3:return Object(O.jsx)(U,{});case 4:return Object(O.jsx)(D,{})}}()})]})})})})})})}var H=c(124),F=c(123);function J(){var e=Object(l.f)(),t=s.a.useContext(y),c=(t.authState,t.setAuthState),a=(t.userState,t.setUserState);return Object(O.jsx)(F.a.Item,{onClick:function(t){d.delete("/auth/token").then((function(t){200==t.status&&(localStorage.removeItem("access_token"),c(!1),a(null),alert("logged out"),e.push("/"))})).catch((function(e){alert(e)}))},children:"Logout"})}function q(){var e=s.a.useContext(y),t=e.authState,c=(e.setAuthState,e.userState);e.setUserState;return Object(O.jsxs)(H.a,{bg:"dark",variant:"dark",expand:"md",style:{padding:"5px"},children:[Object(O.jsx)(H.a.Brand,{href:"/",children:"Web Template"}),Object(O.jsx)(H.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(O.jsxs)(H.a.Collapse,{id:"responsive-navbar-nav",className:"justify-content-between",children:[Object(O.jsxs)(T.a,{className:"mr-auto",children:[Object(O.jsx)(T.a.Link,{children:Object(O.jsx)(i.b,{to:"/",children:"Home"})}),t&&null!=c?Object(O.jsx)(T.a.Link,{children:Object(O.jsx)(i.b,{to:"/create",children:"Create"})}):""]}),Object(O.jsx)(T.a,{children:t&&null!=c?Object(O.jsxs)(F.a,{title:c.username,id:"collasible-nav-dropdown",children:[Object(O.jsx)(F.a.Item,{children:Object(O.jsx)(o,{user:c.username})}),c.privilege>1?Object(O.jsxs)(a.Fragment,{children:[Object(O.jsx)(F.a.Item,{children:Object(O.jsx)(i.b,{to:"/admin/posts",children:"Posts"})}),Object(O.jsx)(F.a.Item,{children:Object(O.jsx)(i.b,{to:"/admin/users",children:"Users"})})]}):"",Object(O.jsx)(J,{})]}):Object(O.jsxs)(a.Fragment,{children:[Object(O.jsx)(T.a.Link,{children:Object(O.jsx)(i.b,{to:"/login",children:"Login"})}),Object(O.jsx)(T.a.Link,{children:Object(O.jsx)(i.b,{to:"/register",children:"Register"})})]})})]})]})}function V(e){var t=Object(l.f)(),c=s.a.useContext(y),n=c.authState,r=(c.setAuthState,c.userState),j=(c.setUserState,Object(a.useRef)(1)),b=h("/post"),d=b.data,x=(b.error,b.isLoaded);return Object(a.useEffect)((function(){return j.current=1,(!n||null==r||r.privilege<=1)&&t.push("/"),function(){j.current=0}})),x?Object(O.jsx)(f.a,{children:Object(O.jsx)(p.a,{children:Object(O.jsx)(v.a,{children:Object(O.jsx)(p.a,{className:"justify-content-md-center",children:Object(O.jsxs)(v.a,{md:"8",children:[Object(O.jsx)("h1",{children:"Admin Posts"}),Object(O.jsx)(u.a,{children:Object(O.jsx)(u.a.Body,{children:0==d.length?Object(O.jsx)("h4",{children:"This user hasn't made any posts yet..."}):Object(O.jsxs)(L.a,{variant:"flush",children:[Object(O.jsx)(L.a.Item,{children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(v.a,{sm:"1",children:Object(O.jsx)("b",{children:"Id"})}),Object(O.jsx)(v.a,{sm:"4",children:Object(O.jsx)("b",{children:"Title"})}),Object(O.jsx)(v.a,{sm:"5",children:Object(O.jsx)("b",{children:"Date"})}),Object(O.jsx)(v.a,{sm:"2",children:Object(O.jsx)("b",{children:"User"})})]})}),d.map((function(e){return Object(O.jsx)(L.a.Item,{children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(v.a,{sm:"1",children:e.id}),Object(O.jsx)(v.a,{sm:"4",children:Object(O.jsx)(i.b,{to:"/post/"+e.id,children:e.title})}),Object(O.jsx)(v.a,{sm:"5",children:e.created_date}),Object(O.jsx)(v.a,{sm:"2",children:Object(O.jsx)(o,{user:e.user})})]})})}))]})})})]})})})})}):Object(O.jsx)(m.a,{animation:"border",role:"status",children:Object(O.jsx)("span",{className:"sr-only"})})}function W(e){var t=Object(l.f)(),c=s.a.useContext(y),n=c.authState,r=(c.setAuthState,c.userState),j=(c.setUserState,Object(a.useRef)(1)),i=h("/user"),b=i.data,d=(i.error,i.isLoaded);return Object(a.useEffect)((function(){return j.current=1,(!n||null==r||r.privilege<=1)&&t.push("/"),function(){j.current=0}})),d?Object(O.jsx)(f.a,{children:Object(O.jsx)(p.a,{children:Object(O.jsx)(v.a,{children:Object(O.jsx)(p.a,{className:"justify-content-md-center",children:Object(O.jsxs)(v.a,{md:"8",children:[Object(O.jsx)("h1",{children:"Admin Users"}),Object(O.jsx)(u.a,{children:Object(O.jsx)(u.a.Body,{children:0==b.length?Object(O.jsx)("h4",{children:"This user hasn't made any posts yet..."}):Object(O.jsxs)(L.a,{variant:"flush",children:[Object(O.jsx)(L.a.Item,{children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(v.a,{sm:"3",children:Object(O.jsx)("b",{children:"Username"})}),Object(O.jsx)(v.a,{sm:"3",children:Object(O.jsx)("b",{children:"Name"})}),Object(O.jsx)(v.a,{sm:"3",children:Object(O.jsx)("b",{children:"Birthday"})}),Object(O.jsx)(v.a,{sm:"3",children:Object(O.jsx)("b",{children:"Gender"})})]})}),b.map((function(e){return Object(O.jsx)(L.a.Item,{children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(v.a,{sm:"3",children:Object(O.jsx)(o,{user:e.username})}),Object(O.jsx)(v.a,{sm:"3",children:e.name}),Object(O.jsx)(v.a,{sm:"3",children:e.gender}),Object(O.jsx)(v.a,{sm:"3",children:e.birthday})]})})}))]})})})]})})})})}):Object(O.jsx)(m.a,{animation:"border",role:"status",children:Object(O.jsx)("span",{className:"sr-only"})})}function z(e){var t=h("/auth/verify/"+Object(l.g)().challenge),c=(t.data,t.error),a=t.isLoaded;return null!==c?Object(O.jsxs)("div",{children:["Verification failed: ",c.message]}):a?Object(O.jsx)(f.a,{children:Object(O.jsx)(p.a,{children:Object(O.jsx)(v.a,{children:Object(O.jsx)(p.a,{className:"justify-content-md-center",children:Object(O.jsxs)(v.a,{md:"8",children:[Object(O.jsx)("h1",{children:"Success"}),Object(O.jsx)(u.a,{children:Object(O.jsx)(u.a.Body,{children:"Your email has been sucesfully verified, you may log in"})})]})})})})}):Object(O.jsx)(m.a,{animation:"border",role:"status",children:Object(O.jsx)("span",{className:"sr-only"})})}function M(){return Object(O.jsx)(f.a,{children:Object(O.jsx)(p.a,{children:Object(O.jsx)(v.a,{children:Object(O.jsx)(p.a,{className:"justify-content-md-center",children:Object(O.jsxs)(v.a,{md:"8",children:[Object(O.jsx)("h1",{children:"Verification Required"}),Object(O.jsx)(u.a,{children:Object(O.jsx)(u.a.Body,{children:"A verification link has been sent to the email you signed up with, check your inbox."})})]})})})})})}function Y(){var e=Object(l.f)(),t=Object(a.useState)(""),c=Object(j.a)(t,2),s=c[0],n=c[1],r=Object(a.useState)(!1),i=Object(j.a)(r,2),b=i[0],h=i[1],o=Object(a.useState)(!1),x=Object(j.a)(o,2),g=x[0],y=x[1];return b?Object(O.jsx)(f.a,{children:Object(O.jsx)(p.a,{children:Object(O.jsx)(v.a,{children:Object(O.jsx)(p.a,{className:"justify-content-md-center",children:Object(O.jsxs)(v.a,{md:"8",children:[Object(O.jsx)("h1",{children:"Reset Request Sent"}),Object(O.jsx)(u.a,{children:Object(O.jsx)(u.a.Body,{children:"A password reset link has been sent to the email you signed up with, check your inbox."})})]})})})})}):Object(O.jsx)(f.a,{children:Object(O.jsx)(p.a,{children:Object(O.jsx)(v.a,{children:Object(O.jsx)(p.a,{className:"justify-content-md-center",children:Object(O.jsxs)(v.a,{md:"8",children:[Object(O.jsx)("h1",{children:"Forgot Password"}),Object(O.jsx)(u.a,{children:Object(O.jsx)(u.a.Body,{children:Object(O.jsxs)(S.a,{onSubmit:function(t){return t.preventDefault(),void(""!=s?(d.post("/auth/requestreset",{email:s}).then((function(e){200==e.status?h(!0):alert(e),y(!1)})).catch((function(t){401==t.response.status?e.push("/verify/instructions"):alert(t),y(!1)})),y(!0)):alert("please do not leave any fields blank"))},children:[Object(O.jsxs)(S.a.Group,{children:[Object(O.jsx)(S.a.Label,{children:"Enter your email"}),Object(O.jsx)(S.a.Control,{type:"email",value:s,onChange:function(e){return n(e.target.value)}})]}),Object(O.jsx)("br",{}),g?Object(O.jsx)(m.a,{animation:"border",role:"status"}):Object(O.jsx)(C.a,{type:"submit",children:"Submit"})]})})})]})})})})})}function K(e){var t=Object(l.g)().challenge,c=Object(a.useState)(""),s=Object(j.a)(c,2),n=s[0],r=s[1],i=Object(a.useState)(""),b=Object(j.a)(i,2),h=b[0],o=b[1],x=Object(a.useState)(!1),g=Object(j.a)(x,2),y=g[0],k=g[1],L=Object(a.useState)(!1),N=Object(j.a)(L,2),w=N[0],I=N[1];return y?Object(O.jsx)(f.a,{children:Object(O.jsx)(p.a,{children:Object(O.jsx)(v.a,{children:Object(O.jsx)(p.a,{className:"justify-content-md-center",children:Object(O.jsxs)(v.a,{md:"8",children:[Object(O.jsx)("h1",{children:"Reset Succeeded"}),Object(O.jsx)(u.a,{children:Object(O.jsx)(u.a.Body,{children:"Your Password has been changed, you may now log in."})})]})})})})}):Object(O.jsx)(f.a,{children:Object(O.jsx)(p.a,{children:Object(O.jsx)(v.a,{children:Object(O.jsx)(p.a,{className:"justify-content-md-center",children:Object(O.jsxs)(v.a,{md:"8",children:[Object(O.jsx)("h1",{children:"Reset Password"}),Object(O.jsx)(u.a,{children:Object(O.jsx)(u.a.Body,{children:Object(O.jsxs)(S.a,{onSubmit:function(e){return e.preventDefault(),void(""!=n&&n==h?(d.post("/auth/reset/"+t,{password:n}).then((function(e){200==e.status?k(!0):alert(e),I(!1)})).catch((function(e){alert(e),I(!1)})),I(!0)):alert("please do not leave any fields blank"))},children:[Object(O.jsxs)(S.a.Group,{children:[Object(O.jsx)(S.a.Label,{children:"Password"}),Object(O.jsx)(S.a.Control,{type:"password",value:n,onChange:function(e){return r(e.target.value)}})]}),Object(O.jsx)("br",{}),Object(O.jsxs)(S.a.Group,{children:[Object(O.jsx)(S.a.Label,{children:"Confirm Password"}),Object(O.jsx)(S.a.Control,{type:"password",value:h,onChange:function(e){return o(e.target.value)}})]}),Object(O.jsx)("br",{}),w?Object(O.jsx)(m.a,{animation:"border",role:"status"}):Object(O.jsx)(C.a,{type:"submit",children:"Submit"})]})})})]})})})})})}function Q(){var e=Object(a.useState)(!1),t=Object(j.a)(e,2),c=t[0],s=t[1],n=Object(a.useState)(null),r=Object(j.a)(n,2),b=r[0],h=r[1];return function(e,t,c,s){var n=Object(a.useState)(null),r=Object(j.a)(n,2),i=r[0],l=r[1];Object(a.useEffect)((function(){null===localStorage.getItem("access_token")||1==e&&null!=c||d.get("/auth/user").then((function(e){200==e.status&&(t(!0),s(e.data),console.log(e.data))})).catch((function(e){l(e)}))}),[e,c])}(c,s,b,h),Object(O.jsx)(y.Provider,{value:{authState:c,setAuthState:s,userState:b,setUserState:h},children:Object(O.jsxs)(i.a,{basename:"/",children:[Object(O.jsx)(q,{}),Object(O.jsx)("div",{children:Object(O.jsxs)(l.c,{children:[Object(O.jsx)(l.a,{exact:!0,path:"/",children:Object(O.jsx)(g,{})}),Object(O.jsx)(l.a,{path:"/reset/:challenge",children:Object(O.jsx)(K,{})}),Object(O.jsx)(l.a,{path:"/verify/instructions",children:Object(O.jsx)(M,{})}),Object(O.jsx)(l.a,{path:"/verify/confirm/:challenge",children:Object(O.jsx)(z,{})}),Object(O.jsx)(l.a,{path:"/admin",children:Object(O.jsx)($,{})}),Object(O.jsx)(l.a,{path:"/post",children:Object(O.jsx)(X,{})}),Object(O.jsx)(l.a,{path:"/user",children:Object(O.jsx)(Z,{})}),Object(O.jsx)(l.a,{path:"/create",children:Object(O.jsx)(k,{})}),Object(O.jsx)(l.a,{path:"/register",children:Object(O.jsx)(E,{})}),Object(O.jsx)(l.a,{path:"/login",children:Object(O.jsx)(I,{})}),Object(O.jsx)(l.a,{path:"/forgotpassword",children:Object(O.jsx)(Y,{})})]})})]})})}function X(){var e=Object(l.h)();Object(l.g)().id;return Object(O.jsxs)(l.c,{children:[Object(O.jsx)(l.a,{path:"".concat(e.path,"/:postId/edit"),children:Object(O.jsx)(w,{})}),Object(O.jsx)(l.a,{path:"".concat(e.path,"/:postId"),children:Object(O.jsx)(N,{})}),Object(O.jsx)(l.a,{path:e.path})]})}function Z(){var e=Object(l.h)();return Object(O.jsxs)(l.c,{children:[Object(O.jsx)(l.a,{path:"".concat(e.path,"/:userName/edit"),children:Object(O.jsx)(_,{})}),Object(O.jsx)(l.a,{path:"".concat(e.path,"/:userName"),children:Object(O.jsx)(A,{})}),Object(O.jsx)(l.a,{path:e.path,children:"g"})]})}function $(){var e=Object(l.h)();return Object(O.jsxs)(l.c,{children:[Object(O.jsx)(l.a,{path:"".concat(e.path,"/posts"),children:Object(O.jsx)(V,{})}),Object(O.jsx)(l.a,{path:"".concat(e.path,"/users"),children:Object(O.jsx)(W,{})}),Object(O.jsx)(l.a,{path:e.path,children:"g"})]})}c(91),c(92);r.a.render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(Q,{})}),document.getElementById("root"))},64:function(e,t,c){}},[[114,1,2]]]);
//# sourceMappingURL=main.fad906aa.chunk.js.map